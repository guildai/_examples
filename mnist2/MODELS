- name: mnist-intro
  description: MNIST model from TensorFlow intro tutorial
  operations:
    train:
      description: Train the MNIST model
      cmd: intro --datadir data
      flags:
        batch-size:
          description: Number of images to include in a training batch
          value: 100
        epochs:
          description: Number of epochs to train
          value: 10
      requires: _mnist:data
    evaluate:
      description: Evaluate a trained model using test data
      cmd: intro --test --datadir data
      requires: [model, '_mnist:data']
  resources:
    model:
      description: Exported intro model
      sources:
      - operation: train//model

- name: mnist-expert
  description: MNIST model from TensorFlow expert tutorial
  operations:
    train:
      description: Train the MNIST model
      cmd: expert --datadir data
      requires: _mnist:data
      flags:
        batch-size:
          description: Number of images to include in a training batch
          value: 100
        epochs:
          description: Number of epochs to train
          value: 5
    evaluate:
      description: Evaluate a trained model using test data
      cmd: expert --test --datadir data
      requires: [model, '_mnist:data']
  resources:
    model:
      description: Exported expert model
      sources:
      - operation: train//model

- name: _mnist
  private: yes
  description: Shared definitions
  resources:
    data:
      description: Yann Lecun's MNIST dataset in compressed IDX format
      path: data
      sources:
      - url: http://yann.lecun.com/exdb/mnist/train-images-idx3-ubyte.gz
        sha256: 440fcabf73cc546fa21475e81ea370265605f56be210a4024d2ca8f203523609
      - url: http://yann.lecun.com/exdb/mnist/train-labels-idx1-ubyte.gz
        sha256: 3552534a0a558bbed6aed32b30c495cca23d567ec52cac8be1a0730e8010255c
      - url: http://yann.lecun.com/exdb/mnist/t10k-images-idx3-ubyte.gz
        sha256: 8d422c7b0a1c1c79245a5bcf07fe86e33eeafee792b84584aec276f5a2dbc4e6
      - url: http://yann.lecun.com/exdb/mnist/t10k-labels-idx1-ubyte.gz
        sha256: f7ae60f92e00ec6debd23a6088c31dbd2371eca3ffa0defaefb259924204aec6
