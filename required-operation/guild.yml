prepare-data:
  description: Prepares (fake) data for training
  main: prepare_data

train:
  description: Trains a (fake) model on prepared data
  main: train
  requires:

    # Here we specify that train requires a run from prepare-data. By
    # default, Guild selects the latest non-error run of the specified
    # operation. If a prepare-data run is marked (i.e. using `guild
    # mark ...`) it will be used instead.

    - operation: prepare-data

      # The `path` attribute is used to store selected files in a path
      # under the run directory. This is useful for strucuting the run
      # directory - especially if the train operation expects files in
      # a specific location.
      path: data

      # Name must be defined to let users specify specific runs to be
      # used for the required operation. E.g. here we define the name
      # as `prepared-data` so that the user can specify a specific run
      # using `guild run prepared-data=RUN-ID`. (Future releases of
      # Guild will use the operation name by default - in the
      # meantime, this attribute is required to let users specify a
      # run explicitly.)

      name: prepared-data

train2:
  description: Alternative (fake) train using different data structure
  main: train2
  requires:

    - operation: prepare-data
      select:
        - subdir/data2.txt
      rename: data2 data
      name: prepared-data
